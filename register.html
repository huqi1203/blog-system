<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客 - 账号注册</title>
    <link rel="stylesheet" href="./css/main.css">
</head>
<body class="login-body">
    <div class="login-box">
        <h2 class="login-title">刚好五个字 · 账号注册</h2>
        <div class="login-tips" style="color:#60a5fa;margin-bottom:20px;">注册账号仅可浏览博客、发表评论，无后台管理权限</div>
        <input type="text" id="reg-username" placeholder="请设置用户名" class="login-input">
        <input type="password" id="reg-password" placeholder="请设置密码(不少于6位)" class="login-input">
        <input type="password" id="reg-repassword" placeholder="请再次输入密码" class="login-input">
        <div class="login-tips" id="reg-tips"></div>
        <button class="login-btn" onclick="register()">立即注册</button>
        <a href="./login.html" class="login-link">已有账号？点击登录</a>
    </div>

    <script src="./js/main.js"></script>
    <script>
        // 自动检测已登录状态
        checkLogin();
        // 注册核心方法
        function register() {
            let username = document.getElementById('reg-username').value.trim();
            let password = document.getElementById('reg-password').value.trim();
            let repassword = document.getElementById('reg-repassword').value.trim();
            let tips = document.getElementById('reg-tips');
            tips.innerHTML = '';

            if(!username || !password) {
                tips.innerHTML = '用户名和密码不能为空！';
                return;
            }
            if(password.length <6) {
                tips.innerHTML = '密码长度不能少于6位！';
                return;
            }
            if(password !== repassword) {
                tips.innerHTML = '两次输入的密码不一致！';
                return;
            }
            let users = JSON.parse(localStorage.getItem('blog_users')) || [];
            let hasUser = users.some(u => u.username === username);
            if(hasUser) {
                tips.innerHTML = '该用户名已被注册！';
                return;
            }
            users.push({username:username, password:password});
            localStorage.setItem('blog_users', JSON.stringify(users));
            alert('注册成功！请登录（该账号为普通访客账号）');
            window.location.href = './login.html';
        }
    </script>
</body>
</html>
